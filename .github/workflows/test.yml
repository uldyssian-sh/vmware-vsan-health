name: Automated Testing

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Run Tests
      run: |
        echo "ğŸ§ª Running automated tests..."
        if [ -f "tests/test.sh" ]; then
          chmod +x tests/test.sh
          ./tests/test.sh
        fi
        if [ -f "tests/test.ps1" ]; then
          pwsh -File tests/test.ps1
        fi
        echo "âœ… Tests completed"
    
    - name: Validate Scripts
      run: |
        echo "ğŸ” Validating script syntax..."
        find . -name "*.sh" -exec bash -n {} \;
        find . -name "*.ps1" -exec pwsh -NoProfile -Command "try { \$null = [System.Management.Automation.PSParser]::Tokenize((Get-Content {}), [ref]\$null) } catch { exit 1 }" \;
        echo "âœ… Syntax validation completed"
